<!DOCTYPE html>
<!--[if lte IE 8]> <html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]-->
<head>
<meta charset="utf-8">
<!--
Made in Twine 1.4.1 (running on Windows 7)
Built on 17 mar 2014 at 23:44:07, Hora oficial do Brasil

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<title>Sugarcane</title>
<script title="engine">
(function(){

function clone(a){var b={};if(!a||typeof a!="object"){return a}for(var property in a){if(typeof a[property]=="object"){try{b[property]=JSON.parse(JSON.stringify(a[property]));continue}catch(e){}}b[property]=a[property]}return b}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});String.prototype.unDash=function(){var s=this.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c}}return -1});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}var scrollWindowInterval;function scrollWindowTo(e){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,g=k(e),c=Math.abs(d-g),b=0,j=(d>g)?-1:1;scrollWindowInterval=window.setInterval(h,25);function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o);var q=p+o.offsetHeight;var l=window.scrollY?window.scrollY:document.documentElement.scrollTop;var m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight;var n=l+m;if(p<l){return p}else{if(q>n){if(o.offsetHeight<m){return(p-(m-o.offsetHeight)+20)}else{return p}}else{return p}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(str){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(str))))}catch(e){return"0"}}if(!hist.passage||hist.passage.id==null){return""}ret+=hist.passage.id.toString(36);if(noVars){return ret}for(vars in d){type=typeof d[vars];if(type!="function"&&type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.prototype.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return JSON.parse(decodeURIComponent(escape(window.atob(str))))}catch(e){return 0}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(c){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(testplay){this.display(testplay,null,"quietly");return true}if(!window.location.hash||(window.location.hash=="#")){return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=this.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false}};History.prototype.saveVariables=function(c,el,callback){this.history.unshift({passage:c,variables:clone(this.history[0].variables)});if(typeof callback=="function"){callback.call(el);this.history[1]&&(this.history[1].linkVars=delta(this.history[1].variables,this.history[0].variables))}};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:1,revision:0,date:new Date("January 1, 2013"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=name.readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=eval(Wikifier.parse(params[j]))}}catch(e){throwError(place,"<<"+macroName+" "+name+">> bad argument: "+params[j],parser.fullMatch());return}}else{try{output=eval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name}else{throwError(place,"<<"+macroName+">> bad expression: "+e.message,parser.fullMatch());return}}}if(!output){throwError(place,'"'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,'The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){try{var args=parser.fullArgs(macroName!="print"),output=eval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,output.toString())}}catch(e){throwError(place,"<<print>> bad expression: "+e.message,parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser)},run:function(a,expression,parser){try{return eval(expression)}catch(e){throwError(a,"bad expression: "+e.message,parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0;for(var i=0;i<src.length;i++){if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;conditions.push(currentCond.trim());clauses.push(currentClause);break}}if((src.substr(i,6)=="<<else")&&!nesting){conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){currentCond=Wikifier.parse(src.slice(i+9,t))}else{currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++}currentClause+=src.charAt(i)}try{if(endPos!=-1){parser.nextMatch=endPos;for(i=0;i<clauses.length;i++){if(eval(conditions[i])){new Wikifier(place,clauses[i]);break}}}else{throwError(place,"can't find matching endif",parser.fullMatch())}}catch(e){throwError(place,"<<if>> bad condition: "+e.message,!i?parser.fullMatch():"<<else if "+conditions[i]+">>")}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs());if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't remember $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching end"+macroName,parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=eval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,"<<"+b+">> bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];if(e[labelParam]=="labeldefault"){this.labeltext=labeltouse}e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=eval(Wikifier.parse(e[0]))}catch(r){throwError(a,"<<"+b+">> bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;el.onclick=(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc,okey){var t,k;this.title=c;if(b){this.id=a;if(ofunc!=null&&typeof ofunc=="function"&&okey!=null){t=b.firstChild?b.firstChild.nodeValue:"";this.initialText=this.text=ofunc(Passage.unescapeLineBreaks(t),okey);this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){this.tags=ofunc(this.tags,okey);this.tags=this.tags.readBracketedList()}else{this.tags=[]}}else{this.initialText=this.text=Passage.unescapeLineBreaks(b.firstChild?b.firstChild.nodeValue:"");this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){this.tags=this.tags.readBracketedList()}else{this.tags=[]}}if(!~(this.tags.indexOf("Twine.image"))){this.preloadImages()}}else{this.initialText=this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.preloadImages=function(){var u="s*['\"]?([^\"']+.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?s*",k=function(c,e){var i,d;do{d=c.exec(this.initialText);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url("+u+")","mig"),1).call(this,new RegExp("srcs*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(~this.tags.indexOf("Twine.image")){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,ns,nsc,nope,settings=this.storysettings={lookup:function(a){return !~["0","off","false"].indexOf((this[a]+""))}},tiddlerTitle="";function deswap(t,k){var i,c,p,p1,up,r="";for(i=0;i<t.length;i++){c=t.charAt(i);up=(c==c.toUpperCase());p=k.indexOf(c.toLowerCase());if(p>-1){p1=p+(p%2==0?1:-1);if(p1>=k.length){p1=p}c=k.charAt(p1);up&&(c=c.toUpperCase())}r=r+c}return r}this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="swap"&&settings.obfuscatekey){ns="";nope=':\\"n0';if(settings.obfuscatekey=="rot13"){settings.obfuscatekey="anbocpdqerfsgthuivjwkxlymz"}for(i=0;i<settings.obfuscatekey.length;i++){nsc=settings.obfuscatekey[i];if(ns.indexOf(nsc)==-1&&nope.indexOf(nsc)==-1){ns=ns+nsc}}settings.obfuscatekey=ns;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){if(tiddlerTitle!="StorySettings"){tiddlerTitle=deswap(tiddlerTitle,settings.obfuscatekey)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,deswap,settings.obfuscatekey)}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo")};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="ccadv";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").style.display="block";setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){insertText(place,this.source.substring(startPos,endPos))};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=source.indexOf(">>",this.matchStart),startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";function alter(from,to){return b.replace(new RegExp(from+g,"gi"),to)}re=new RegExp(Wikifier.textPrimitives.variable,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}b=alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1");b=alter("\\beq\\b"," == ");b=alter("\\bneq\\b"," != ");b=alter("\\bgt\\b"," > ");b=alter("\\bgte\\b"," >= ");b=alter("\\blt\\b"," < ");b=alter("\\blte\\b"," <= ");b=alter("\\band\\b"," && ");b=alter("\\bor\\b"," || ");b=alter("\\bnot\\b"," ! ");b=alter("\\bis\\b"," == ");b=alter("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead="(?:("+Wikifier.textPrimitives.anyLetter+"+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:("+Wikifier.textPrimitives.anyLetter+"+):([^;\\|\\n]+);)",lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[1]){s=lookaheadMatch[1].unDash();v=lookaheadMatch[2]}else{s=lookaheadMatch[3].unDash();v=lookaheadMatch[4]}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var text=lookaheadMatch[1];if(navigator.userAgent.indexOf("msie")!=-1&&navigator.userAgent.indexOf("opera")==-1){text=text.replace(/\n/g,"\r")}var e=insertElement(w.output,"pre",null,null,text);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",handler:function(a){insertElement(a.output,"span",null,"char "+String.fromCharCode(8212),String.fromCharCode(8212))}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"monospacedByLineForPlugin",match:"^//\\{\\{\\{\\n",lookahead:"^//\\{\\{\\{\\n\\n*((?:^[^\\n]*\\n)+?)(\\n*^//\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"wikifyCommentForPlugin",match:"^/\\*\\*\\*\\n",terminator:"^\\*\\*\\*/\\n",handler:function(w){w.subWikify(w.output,this.terminator)}},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"quoteByLine",match:"^>+",terminator:"\\n",element:"blockquote",handler:function(w){var lookaheadRegExp=new RegExp(this.match,"mg");var placeStack=[w.output];var currLevel=0;var newLevel=w.matchLength;var t;do{if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],this.element))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}}currLevel=newLevel;w.subWikify(placeStack[placeStack.length-1],this.terminator);lookaheadRegExp.lastIndex=w.nextMatch;var lookaheadMatch=lookaheadRegExp.exec(w.source);var matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;w.nextMatch+=lookaheadMatch[0].length;insertElement(placeStack[placeStack.length-1],"br")}}while(matched)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",outerElement:"ul",itemElement:"li",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");w.nextMatch=w.matchStart;var placeStack=[w.output];var currType=null,newType;var currLevel=0,newLevel;var t;do{lookaheadRegExp.lastIndex=w.nextMatch;var lookaheadMatch=lookaheadRegExp.exec(w.source);var matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){if(lookaheadMatch[1]){newType="ul"}if(lookaheadMatch[2]){newType="ol"}newLevel=lookaheadMatch[0].length;w.nextMatch+=lookaheadMatch[0].length;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;var e=insertElement(placeStack[placeStack.length-1],"li");w.subWikify(e,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:http|https|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|\\]]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(out,code,callback){return function(){macros.set.run(out,Wikifier.parse(code));typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(out,match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}var img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}img.src=lookaheadMatch[4];var imgPassages=tale.lookup("tags","Twine.image");for(var j=0;j<imgPassages.length;j++){if(imgPassages[j].title==lookaheadMatch[4]){img.src=imgPassages[j].text;break}}w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:"<<([^>\\s]+)(?:\\s*)((?:[^>]|>(?!>))*)>>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,"Macro not found: "+name,w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)]+)(?:\\):))|(?:([^:@]+):([^;]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}}w.subWikify(e,this.terminator)}},{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmltag",match:"<\\w+(?:(?:\\s+\\w+(?:\\s*=\\s*(?:\".*?\"|'.*?'|[^'\">\\s]+))?)+\\s*|\\s*)\\/?>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var e,isvoid,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1];if(tn&&tn.toLowerCase()!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn.toLowerCase())!=-1);lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}},{name:"char",match:".",handler:function(a){insertElement(a.output,"span",null,"char "+(a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText),a.matchText)}}];Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(eval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag,title);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}el.onclick=Wikifier.linkFunction(title,el,callback);if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){el.onclick=callback}if(place){place.appendChild(el)}return el};if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))){Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-]"}}else{Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"}}Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","\\.")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","\\.")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","\\.")+"*)+)";function visited(e){var ret=0,i=0;if(!state){return 0}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++}}}return ret}function visitedTag(){var i,j,k,ret=0;if(!state){return 0}for(i=0;i<state.history.length&&state.history[i].passage;i++){for(j=0;j<state.history.length&&state.history[i].passage;i++){for(k=0;k<arguments.length||void ret++;k++){if(state.history[i].passage.tags.indexOf(arguments[k])==-1){break}}}}return ret}function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function either(){return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this story ("+s.title+": "+e.message+")."+softErrorMessage)}}var softErrorMessage=" You may be able to continue playing, but parts of the story may not work properly.";window.onerror=function(e){alert("Sorry to interrupt, but this story's code has got itself in a mess ("+e+")."+softErrorMessage);window.onerror=null};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)};var imgs,scripts,macro,style,styleText="",i,passages=document.getElementById("passages");function sanityCheck(thing){if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert("NOTE: The "+thing+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This story requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This story's HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags+""=="stylesheet"){styleText+=alterCSS(i.text)}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1&&i.tags.indexOf("stylesheet")>-1){setTransitionCSS(i.text)}}}style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()};

var hasPushState=!!window.history&&(typeof window.history.pushState=="function");Tale.prototype.canBookmark=function(){return this.canUndo()&&(this.storysettings.lookup("bookmark")||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var e,bookmarkhref,c=tale.get(title),p=document.getElementById("passages");if(c==null){return}if(type!="back"){this.saveVariables(c,source,callback);if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("history"+this.id,JSON.stringify(this.history));this.pushState(this.history.length<=2&&window.history.state=="")}catch(e){alert("Your browser couldn't save the state of the game.\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}bookmarkhref=this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(var i=0;i<p.childNodes.length;i+=1){var q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"})}tale.setPageElements()}else{p.appendChild(e);e.style.visibility="visible"}if(tale.canUndo()){if(!hasPushState&&type!="back"){this.hash=bookmarkhref;window.location.hash=this.hash}else{if(tale.canBookmark()){var bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=bookmarkhref)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{snapback.onclick=Interface.showSnapback}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&(restart.onclick=Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this story?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;b.onclick=function(){var p=this.pos;var n=state.history[p].passage.title;while(p>=0){if(state.history.length>1){state.history.shift()}p--}state.display(n)};b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";document.onclick=Interface.hideAllMenus;b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=JSON.parse(sessionStorage.getItem("history"+s.id)),steps=hist.length-s.length}if(hist!=null&&steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
body {
	background-color: #000;
	color: #fff;
	font-family: Verdana,sans-serif;
	font-size: 62.5%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	position: absolute;
	width: 12em;
	left: 7.5em;
	list-style: none;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Verdana,sans-serif;
}
#sidebar li {
	color: #333;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em !important;
	list-style: none;
}
#sidebar li:hover {
	color: #fff;
	cursor: pointer;
}
#sidebar li a {
	color: #333;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover {
	color: #fff;
	text-decoration: none;
}
#sidebar #title {
	color: #999;
	font-size: 150%;
	cursor: auto;
}
#sidebar #title a {
	color: #999;
}
#sidebar #storySubtitle {
	font-size: 75%;
	display: block;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	display: none;
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
	text-align:right !important;
}
#sidebar #title:hover {
	color: #999;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 80%;
	cursor: auto;
}
#sidebar #credits:hover {
	color: #333;
}
#sidebar #credits a {
	text-decoration: none;
}
.menu {
	position: absolute;
	display: none;
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
#passages {
	margin-left: 18.2em;
	border-left: 1px solid #333;
	padding-left: 1.5em;
	position:relative;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage ul {
	padding-top: 1.3em;
}
.passage li {
	margin-right: 6em;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.passage a {
	color: #4d6ad8;
	font-weight: bold;
	text-decoration: none;
}
a.internalLink, a.externalLink, a.back, a.return {
	cursor: pointer;
}
.passage a:hover {
	color: #8ea6ff;
	text-decoration: underline;
}
a.brokenLink {
	background-color: red;
	text-decoration: none;
	color: #000;
}
.disabled {
	font-weight: bold;
	color: #333;
}
.marked {
	background-color: red;
	color: #000;
	margin-right: 12px;
	padding: 3px;
}
.marked[title] {
	cursor: help;
}
.passage ul {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
input, button {
	background-color: #000;
	color:#fff;
	font-size: 1.2em;
}
button {
	border: 2px outset #333;
	border-radius:0.5em;
	padding: 0.2em 0.8em;
}
button:active {
	border-style:solid;
}
input[type=text] {
	border: 2px solid #333;
	width: 20%;
}
input[type=text]:hover {
	border-color: #fff;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
img {
	vertical-align:bottom;
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement"></li>
<li id="snapback">Rewind</li>
<li id="restart">Restart</li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>#sidebar{display:none;}</style>
</div>
<div id="storeArea"><div tiddler="In East Pit" tags="" modified="201403172120" created="201403172120" twine-position="232,548" modifier="twee">You are at the bottom of the eastern pit in the twopit room.\nThere is a small pool of oil in one corner of the pit.\n* [[Up|At East End Of Twopit Room]]</div><div tiddler="At Breath Taking View" tags="" modified="201403172120" created="201403172120" twine-position="781,2096" modifier="twee">You are on the edge of a breath-taking view.\nFar below you is an active volcano, from which great gouts of molten lava come surging  out,\ncascading back down into the depths.\nThe glowing rock fills the farthest reaches of the cavern with a blood-red glare,\ngiving everything an eerie, macabre appearance.\nThe air is filled with flickering sparks of ash and a heavy smell of brimstone.\nThe walls are hot to the touch,\nand the thundering of the volcano drowns out all other sounds.\nEmbedded in the jagged roof far overhead\nare myriad twisted formations composed of pure white alabaster,\nwhich scatter the murky light into sinister apparitions upon the walls.\nTo one side is a deep gorge, filled with a bizarre chaos of tortured rock\nwhich seems to have been crafted by the devil himself.\nAn immense river of fire crashes out from the depths of the volcano,\nburns its way through the gorge, and plummets into a bottomless pit far off to your left.\nTo the right, an immense geyser of blistering steam erupts continuously\nfrom a barren island in the center of a sulfurous lake, which bubbles ominously.\nThe far right wall is aflame with an incandescence of its own,\nwhich lends an additional infernal splendor to the already hellish scene.\nA dark, forboding passage exits to the south.\n* [[Leave|At Junction With Warm Walls]]\n* [[South|At Junction With Warm Walls]]\n* [[Down|Don't be ridiculous!]]</div><div tiddler="On Sw Side Of Chasm" tags="" modified="201403172120" created="201403172120" twine-position="2383,1917" modifier="twee">You are on one side of a large, deep chasm.\nA heavy white mist rising up from below obscures all view of the far side.\nA southwest path leads away from the chasm into a winding corridor.\n* [[Down|In Sloping Corridor]]</div><div tiddler="At East End Of Twopit Room" tags="" modified="201403172120" created="201403172120" twine-position="565,545" modifier="twee">You are at the east end of the twopit room.\nThe floor here is littered with thin rock slabs, which make it easy to descend the pits.\nThere is a path here bypassing the pits to connect passages from east and west.\nThere are holes all over,\nbut the only big one is on the wall directly over the west pit where you can't get to it.\n* [[West|At West End Of Twopit Room]]\n* [[East|In Swiss Cheese Room]]\n* [[Down|In East Pit]]</div><div tiddler="In Shell Room" tags="" modified="201403172120" created="201403172120" twine-position="831,1068" modifier="twee">You're in a large room carved out of sedimentary rock.\nThe floor and walls are littered with bits of shells imbedded in the stone.\nA shallow passage proceeds downward, and a somewhat steeper one leads up.\nA low hands and knees passage enters from the south.\n* [[Up|In Arched Hall]]\n* [[Down|In Ragged Corridor]]</div><div tiddler="In Slab Room" tags="" modified="201403172120" created="201403172120" twine-position="1218,520" modifier="twee">You are in a large low circular chamber\nwhose floor is an immense slab fallen from the ceiling (slab room).\nEast and west there once were large passages, but they are now filled with boulders.\nLow small passages go north and south, and the south one quickly bends west around the boulders.\n* [[South|At West End Of Twopit Room]]\n* [[North|In Bedquilt]]\n* [[Up|In Secret N S Canyon 0]]</div><div tiddler="In Large Low Room" tags="" modified="201403172120" created="201403172120" twine-position="2673,1671" modifier="twee">You are in a large low room. Crawls lead north, se, and sw.\n* [[North|Dead End Crawl]]</div><div tiddler="In Misty Cavern" tags="" modified="201403172120" created="201403172120" twine-position="2986,1927" modifier="twee">You are following a wide path around the outer edge of a large cavern.\nFar below, through a heavy white mist, strange splashing noises can be heard.\nThe mist rises up through a fissure in the ceiling.\nThe path exits to the south and west.\n* [[West|In Alcove]]\n* [[South|In Oriental Room]]</div><div tiddler="At Top Of Small Pit" tags="" modified="201403172120" created="201403172120" twine-position="2285,318" modifier="twee">At your feet is a small pit breathing traces of white mist.\nA west passage ends here except for a small crack leading on.\n\nRough stone steps lead down the pit.\n* [[West|The crack is far too small for you to follow.]]\n* [[East|In Bird Chamber]]</div><div tiddler="At Slit In Streambed" tags="" modified="201403172341" created="201403172120" twine-position="1295,120" modifier="twee">At your feet all the water of the stream splashes into a 2-inch slit in the rock.\nDownstream the streambed is bare rock.\n* [[West|In Forest 1]]\n* [[East|In Forest 1]]\n* [[South|Outside Grate]]\n* [[North|In A Valley]]\n</div><div tiddler="In Barren Room" tags="" modified="201403172120" created="201403172120" twine-position="1677,2096" modifier="twee">You are inside a barren room.\nThe center of the room is completely empty except for some dust.\nMarks in the dust lead away toward the far end of the room.\nThe only exit is the way you came in.\n* [[Leave|In Front Of Barren Room]]\n* [[West|In Front Of Barren Room]]</div><div tiddler="In Awkward Sloping E W Canyon" tags="" modified="201403172120" created="201403172120" twine-position="1983,101" modifier="twee">You are in an awkward sloping east/west canyon.\n* [[West|In Bird Chamber]]\n* [[East|In Debris Room]]\n* [[Up|In Bird Chamber]]\n* [[Down|In Debris Room]]</div><div tiddler="In Forest 1" tags="" modified="201403172120" created="201403172120" twine-position="510,242" modifier="twee">You are in open forest, with a deep valley to one side.\n* [[West|In Forest 1]]\n* [[East|In A Valley]]\n* [[South|In Forest 1]]\n* [[North|In Forest 1]]\n* [[Down|In A Valley]]</div><div tiddler="In Front Of Barren Room" tags="" modified="201403172120" created="201403172120" twine-position="1681,2398" modifier="twee">You are standing at the entrance to a large, barren room.\nA sign posted above the entrance reads: 'Caution! Bear in room!'\n* [[West|In Limestone Passage]]\n* [[Enter|In Barren Room]]\n* [[East|In Barren Room]]\n* [[Up|In Limestone Passage]]</div><div tiddler="In Swiss Cheese Room" tags="" modified="201403172120" created="201403172120" twine-position="561,366" modifier="twee">You are in a room whose walls resemble swiss cheese.\nObvious passages go west, east, ne, and nw.\nPart of the room is occupied by a large bedrock block.\n* [[West|At East End Of Twopit Room]]\n* [[East|In Soft Room]]\n* [[South|In Tall E W Canyon]]</div><div tiddler="In Tall E W Canyon" tags="" modified="201403172120" created="201403172120" twine-position="760,442" modifier="twee">You are in a tall E/W canyon. A low tight crawl goes 3 feet north\nand seems to open up.\n* [[West|Dead End 8]]\n* [[East|In N S Canyon]]\n* [[North|In Swiss Cheese Room]]</div><div tiddler="At East End Of Long Hall" tags="" modified="201403172120" created="201403172120" twine-position="2370,1113" modifier="twee">You are at the east end of a very long hall apparently without side chambers.\nTo the east a low wide crawl slants up.\nTo the north a round two foot hole slants down.\n* [[West|At West End Of Long Hall]]\n* [[East|At West End Of Hall Of Mists]]\n* [[North|Crossover]]\n* [[Up|At West End Of Hall Of Mists]]\n* [[Down|Crossover]]</div><div tiddler="In Secret E W Canyon" tags="" modified="201403172120" created="201403172120" twine-position="1957,348" modifier="twee">You are in a secret canyon which here runs E/W.\nIt crosses over a very tight canyon 15 feet below.\nIf you go down you may not be able to get back up.\n* [[West|In Secret Canyon]]\n* [[East|In Hall Of Mt King]]\n* [[Down|In N S Canyon]]</div><div tiddler="In N S Canyon" tags="" modified="201403172120" created="201403172120" twine-position="1123,388" modifier="twee">You are at a wide place in a very tight N/S canyon.\n* [[South|Canyon Dead End]]\n* [[North|In Tall E W Canyon]]</div><div tiddler="At Complex Junction" tags="" modified="201403172120" created="201403172120" twine-position="850,861" modifier="twee">You are at a complex junction.\nA low hands and knees passage from the north joins a higher crawl from the east\nto make a walking passage going west.\nThere is also a large room above.\nThe air is damp here.\n* [[West|In Bedquilt]]\n* [[East|In Anteroom]]\n* [[North|In Shell Room]]\n* [[Up|In Dusty Rock Room]]</div><div tiddler="At Steep Incline" tags="" modified="201403172120" created="201403172120" twine-position="2683,1452" modifier="twee">You are at the top of a steep incline above a large room.\nYou could climb down here, but you would not be able to climb up.\nThere is a passage leading back to the north.\n* [[North|In Cavern With Waterfall]]\n* [[Down|In Large Low Room]]</div><div tiddler="In Secret Canyon" tags="" modified="201403172120" created="201403172120" twine-position="1733,517" modifier="twee">You are in a secret canyon which exits to the north and east.</div><div tiddler="In Arched Hall" tags="" modified="201403172120" created="201403172120" twine-position="815,1252" modifier="twee">You are in an arched hall.\nA coral passage once continued up and east from here, but is now blocked by debris.\nThe air smells of sea water.\n* [[Down|In Shell Room]]</div><div tiddler="In West Side Chamber" tags="" modified="201403172120" created="201403172120" twine-position="2265,663" modifier="twee">You are in the west side chamber of the hall of the mountain king.\nA passage continues west and up here.\n* [[West|Crossover]]\n* [[East|In Hall Of Mt King]]\n* [[Up|Crossover]]</div><div tiddler="At Y2" tags="" modified="201403172120" created="201403172120" twine-position="738,1713" modifier="twee">You are in a large room, with a passage to the south,\na passage to the west, and a wall of broken rock to the east.\nThere is a large 'Y2' on a rock in the room's center.\n* [[West|At Window On Pit 1]]\n* [[East|Jumble Of Rock]]\n* [[South|Low N S Passage]]</div><div tiddler="In Ragged Corridor" tags="" modified="201403172120" created="201403172120" twine-position="1070,1055" modifier="twee">You are in a long sloping corridor with ragged sharp walls.\n* [[Up|In Shell Room]]\n* [[Down|In A Cul De Sac]]</div><div tiddler="In Soft Room" tags="" modified="201403172120" created="201403172120" twine-position="211,371" modifier="twee">You are in the soft room.\nThe walls are covered with heavy curtains, the floor with a thick pile carpet.\nMoss covers the ceiling.\n* [[West|In Swiss Cheese Room]]</div><div tiddler="In Secret N S Canyon 0" tags="" modified="201403172120" created="201403172120" twine-position="1510,520" modifier="twee">You are in a secret N/S canyon above a large room.\n* [[South|In Secret Canyon]]\n* [[North|In Mirror Canyon]]\n* [[Down|In Slab Room]]</div><div tiddler="In Secret N S Canyon 1" tags="" modified="201403172120" created="201403172120" twine-position="1133,1890" modifier="twee">You are in a secret N/S canyon above a sizable passage.\n* [[South|Atop Stalactite]]\n* [[North|At Junction Of Three]]\n* [[Down|In Bedquilt]]</div><div tiddler="Jumble Of Rock" tags="" modified="201403172120" created="201403172120" twine-position="1032,1701" modifier="twee">You are in a jumble of rock, with cracks everywhere.\n* [[Up|In Hall Of Mists]]\n* [[Down|At Y2]]</div><div tiddler="At Junction With Warm Walls" tags="" modified="201403172120" created="201403172120" twine-position="1136,2102" modifier="twee">The walls are quite warm here.\nFrom the north can be heard a steady roar,\nso loud that the entire cave seems to be trembling.\nAnother passage leads south, and a low crawl goes east.\n* [[East|In Chamber Of Boulders]]\n* [[South|At Fork In Path]]\n* [[North|At Breath Taking View]]</div><div tiddler="On Ne Side Of Chasm" tags="" modified="201403172120" created="201403172120" twine-position="472,2388" modifier="twee">You are on the far side of the chasm.\nA northeast path leads away from the chasm on this side.</div><div tiddler="At West End Of Long Hall" tags="" modified="201403172120" created="201403172120" twine-position="2546,912" modifier="twee">You are at the west end of a very long featureless hall.\nThe hall joins up with a narrow north/south passage.\n* [[East|At East End Of Long Hall]]\n* [[South|Different Maze 1]]\n* [[North|Crossover]]</div><div tiddler="In Cobble Crawl" tags="" modified="201403172120" created="201403172120" twine-position="1476,106" modifier="twee">You are crawling over cobbles in a low passage.\nThere is a dim light at the east end of the passage.\n* [[West|In Debris Room]]\n* [[East|Below The Grate]]</div><div tiddler="dwarf" tags="" modified="201403172120" created="201403172120" twine-position="2652,197" modifier="twee">It's probably not a good idea to get too close.\nSuffice it to say the little guy's pretty aggressive.</div><div tiddler="In Anteroom" tags="" modified="201403172120" created="201403172120" twine-position="831,651" modifier="twee">You are in an anteroom leading to a large passage to the east.\nSmall passages go west and up.\nThe remnants of recent digging are evident.\n* [[West|In Bedquilt]]\n* [[East|At Witts End]]\n* [[Up|At Complex Junction]]</div><div tiddler="At West End Of Hall Of Mists" tags="" modified="201403172120" created="201403172120" twine-position="2708,1207" modifier="twee">You are at the west end of the hall of mists.\nA low wide crawl continues west and another goes north.\nTo the south is a little passage 6 feet off the floor.\n* [[West|At East End Of Long Hall]]\n* [[East|West Side Of Fissure]]\n* [[South|Alike Maze 1]]\n* [[North|West Side Of Fissure]]\n* [[Up|Alike Maze 1]]</div><div tiddler="In Dirty Passage" tags="" modified="201403172120" created="201403172120" twine-position="241,773" modifier="twee">You are in a dirty broken passage.\nTo the east is a crawl.\nTo the west is a large passage.\nAbove you is a hole to another passage.\n* [[West|In Dusty Rock Room]]\n* [[East|On Brink Of Pit]]\n* [[Up|Low N S Passage]]</div><div tiddler="In Bird Chamber" tags="" modified="201403172120" created="201403172120" twine-position="2251,121" modifier="twee">You are in a splendid chamber thirty feet high.\nThe walls are frozen rivers of orange stone.\nAn awkward canyon and a good passage exit from east and west sides of the chamber.\n* [[West|At Top Of Small Pit]]\n* [[East|In Awkward Sloping E W Canyon]]</div><div tiddler="MazeRoom" tags="" modified="201403172120" created="201403172120" twine-position="2975,196" modifier="twee">You are in a maze of twisty little passages, all alike.\n* [[Leave|Easier said than done.]]</div><div tiddler="At Window On Pit 1" tags="" modified="201403172120" created="201403172120" twine-position="197,1506" modifier="twee">You're at a low window overlooking a huge pit, which extends up out of sight.\nA floor is indistinctly visible over 50 feet below.\nTraces of white mist cover the floor of the pit, becoming thicker to the right.\nMarks in the dust around the window would seem to indicate that someone has been here recently.\nDirectly across the pit from you and 25 feet away\nthere is a similar window looking into a lighted room.\nA shadowy figure can be seen there peering back at you.\n* [[East|At Y2]]</div><div tiddler="At Window On Pit 2" tags="" modified="201403172120" created="201403172120" twine-position="1675,1912" modifier="twee">You're at a low window overlooking a huge pit, which extends up out of sight.\nA floor is indistinctly visible over 50 feet below.\nTraces of white mist cover the floor of the pit, becoming thicker to the left.\nMarks in the dust around the window would seem to indicate that someone has been here recently.\nDirectly across the pit from you and 25 feet away\nthere is a similar window looking into a lighted room.\nA shadowy figure can be seen there peering back at you.\n* [[West|At Junction Of Three]]</div><div tiddler="At End Of Road" tags="" modified="201403172343" created="201403172120" twine-position="318,16" modifier="twee">You are standing at the end of a road before a small brick building.\nAround you is a forest.\nA small stream flows out of the building and down a gully.\n* [[Enter building|Inside Building]]\n* [[West|At Hill In Road]]\n* [[South|In A Valley]]\n* [[North|In Forest 1]]\n&lt;&lt;if $bottle&gt;&gt;&lt;&lt;if !$bottle_has_water&gt;&gt;\n* [[Fill bottle with water|Fill Bottle With Water]]\n&lt;&lt;endif&gt;&gt;&lt;&lt;endif&gt;&gt;</div><div tiddler="In Cavern With Waterfall" tags="" modified="201403172120" created="201403172120" twine-position="2307,1448" modifier="twee">You are in a magnificent cavern with a rushing stream,\nwhich cascades over a sparkling waterfall into a roaring whirlpool\nwhich disappears through a hole in the floor.\nPassages exit to the south and west.\n* [[West|At Steep Incline]]\n* [[South|In Immense N S Passage]]</div><div tiddler="At Brink Of Pit" tags="" modified="201403172120" created="201403172120" twine-position="2432,80" modifier="twee">You are on the brink of a thirty foot pit with a massive orange column down one wall.\nYou could climb down here but you could not get back up.\nThe maze continues at this level.\n* [[West|Alike Maze 10]]\n* [[East|Alike Maze 13]]\n* [[South|Dead End 6]]\n* [[North|Alike Maze 12]]\n* [[Down|In Bird Chamber]]</div><div tiddler="water in the bottle" tags="" modified="201403172120" created="201403172120" twine-position="3013,837" modifier="twee">It looks like ordinary water to me.</div><div tiddler="In Dark Room" tags="" modified="201403172120" created="201403172120" twine-position="2656,45" modifier="twee">You're in the dark-room. A corridor leading south is the only exit.\n* [[South|In Plover Room]]</div><div tiddler="CrystalBridge" tags="" modified="201403172120" created="201403172120" twine-position="2646,348" modifier="twee">It spans the fissure, thereby providing you a way across.</div><div tiddler="shards" tags="" modified="201403172120" created="201403172120" twine-position="2988,661" modifier="twee">They look to be the remains of what was once a beautiful vase.\nI guess some oaf must have dropped it.</div><div tiddler="At Sw End" tags="" modified="201403172120" created="201403172120" twine-position="3128,661" modifier="twee">You are at the southwest end of the repository.\nTo one side is a pit full of fierce green snakes.\nOn the other side is a row of small wicker cages, each of which contains a little sulking bird.\nIn one corner is a bundle of black rods with rusty marks on their ends.\nA large number of velvet pillows are scattered about on the floor.\nA vast mirror stretches off to the northeast.\nAt your feet is a large steel grate, next to which is a sign which reads,\n'TREASURE VAULT. Keys in main office.'\n* [[Down|RepositoryGrate]]</div><div tiddler="fresh batteries" tags="" modified="201403172120" created="201403172120" twine-position="2843,338" modifier="twee">They look like ordinary batteries. (A sepulchral voice says, 'Still going!')</div><div tiddler="In Nugget Of Gold Room" tags="" modified="201403172120" created="201403172120" twine-position="1800,1437" modifier="twee">This is a low room with a crude note on the wall:\n\n'You won't get it up the steps'.\n* [[North|In Hall Of Mists]]</div><div tiddler="At Ne End" tags="" modified="201403172120" created="201403172120" twine-position="3121,326" modifier="twee">You are at the northeast end of an immense room, even larger than the giant room.\nIt appears to be a repository for the 'Adventure' program.\nMassive torches far overhead bathe the room with smoky yellow light.\nScattered about you can be seen a pile of bottles (all of them empty),\na nursery of young beanstalks murmuring quietly, a bed of oysters,\na bundle of black rods with rusty stars on their ends, and a collection of brass lanterns.\nOff to one side a great many dwarves are sleeping on the floor, snoring loudly.\nA sign nearby reads: 'Do not disturb the dwarves!'</div><div tiddler="Low N S Passage" tags="" modified="201403172120" created="201403172120" twine-position="735,1433" modifier="twee">You are in a low N/S passage at a hole in the floor.\nThe hole goes down to an E/W passage.\n* [[South|In Hall Of Mt King]]\n* [[North|At Y2]]\n* [[Down|In Dirty Passage]]</div><div tiddler="old batteries" tags="" modified="201403172120" created="201403172120" twine-position="2622,721" modifier="twee">They look like ordinary batteries.</div><div tiddler="At Junction Of Three" tags="" modified="201403172120" created="201403172120" twine-position="1468,1910" modifier="twee">You are in a secret canyon at a junction of three canyons, bearing north, south, and se.\nThe north one is as tall as the other two combined.\n* [[South|In Secret N S Canyon 1]]\n* [[North|At Window On Pit 2]]</div><div tiddler="Start" tags="" modified="201403172121" created="201403172121" twine-position="75,13" modifier="twee">Colossal Cave Adventure\nOriginal by Will Crowther (1976) and Don Woods (1977)\nInform version by Donald Ekman, David M. Baggett (1993) and Graham Nelson (1994)\nTwee2SAM adaptation by Haroldo O. Pinheiro (2014)\n* [[Start game|At End Of Road]]</div><div tiddler="At Hill In Road" tags="" modified="201403172340" created="201403172120" twine-position="643,95" modifier="twee">You have walked up a hill, still in the forest.\nThe road slopes back down the other side of the hill.\nThere is a building in the distance.\n* [[Follow road|At End Of Road]]\n* [[South|In Forest 1]]\n</div><div tiddler="HoleAbovePit 1" tags="" modified="201403172120" created="201403172120" twine-position="2915,476" modifier="twee">The hole is in the wall above the pit at this end of the room.</div><div tiddler="In Hall Of Mists" tags="" modified="201403172120" created="201403172120" twine-position="2030,1266" modifier="twee">You are at one end of a vast hall stretching forward out of sight to the west.\nThere are openings to either side.\nNearby, a wide stone staircase leads downward.\nThe hall is filled with wisps of white mist swaying to and fro almost as if alive.\nA cold wind blows up the staircase.\nThere is a passage at the top of a dome behind you.\n\nRough stone steps lead up the dome.\n* [[West|On East Bank Of Fissure]]\n* [[South|In Nugget Of Gold Room]]\n* [[North|In Hall Of Mt King]]\n* [[Down|In Hall Of Mt King]]</div><div tiddler="Atop Stalactite" tags="" modified="201403172120" created="201403172120" twine-position="776,1897" modifier="twee">A large stalactite extends from the roof and almost reaches the floor below.\nYou could climb down it, and jump from it to the floor,\nbut having done so you would be unable to reach it to climb back up.\n* [[North|In Secret N S Canyon 1]]</div><div tiddler="In A Cul De Sac" tags="" modified="201403172120" created="201403172120" twine-position="1055,1218" modifier="twee">You are in a cul-de-sac about eight feet across.\n* [[Leave|In Ragged Corridor]]\n* [[Up|In Ragged Corridor]]</div><div tiddler="In Corridor" tags="" modified="201403172120" created="201403172120" twine-position="770,2400" modifier="twee">You're in a long east/west corridor.\nA faint rumbling noise can be heard in the distance.\n* [[West|On Ne Side Of Chasm]]\n* [[East|At Fork In Path]]</div><div tiddler="pearl" tags="" modified="201403172120" created="201403172120" twine-position="2796,877" modifier="twee">It's incredibly large!</div><div tiddler="In Chamber Of Boulders" tags="" modified="201403172120" created="201403172120" twine-position="1466,2110" modifier="twee">You are in a small chamber filled with large boulders.\nThe walls are very warm, causing the air in the room to be almost stifling from the heat.\nThe only exit is a crawl heading west, through which is coming a low rumbling.\n* [[Leave|At Junction With Warm Walls]]\n* [[West|At Junction With Warm Walls]]</div><div tiddler="In A Valley" tags="" modified="201403162317" created="201403132348" twine-position="1103,19" modifier="twee">You are in a valley in the forest beside a stream tumbling along a rocky bed.\n* [[Back to road|At End Of Road]]\n* [[Enter forest|In Forest 1]]\n* [[Follow streambed|At Slit In Streambed]]</div><div tiddler="On Brink Of Pit" tags="" modified="201403172120" created="201403172120" twine-position="21,772" modifier="twee">You are on the brink of a small clean climbable pit.\nA crawl leads west.\n* [[West|In Dirty Passage]]\n* [[Enter|In Pit]]\n* [[Down|In Pit]]</div><div tiddler="On East Bank Of Fissure" tags="" modified="201403172120" created="201403172120" twine-position="2240,1293" modifier="twee">You are on the east bank of a fissure slicing clear across the hall.\nThe mist is quite thick here, and the fissure is too wide to jump.\n* [[West|The fissure is too wide.]]\n* [[East|In Hall Of Mists]]</div><div tiddler="In Dusty Rock Room" tags="" modified="201403172120" created="201403172120" twine-position="473,758" modifier="twee">You are in a large room full of dusty rocks.\nThere is a big hole in the floor.\nThere are cracks everywhere, and a passage leading east.\n* [[East|In Dirty Passage]]\n* [[Down|At Complex Junction]]</div><div tiddler="In West Pit" tags="" modified="201403172120" created="201403172120" twine-position="1726,1642" modifier="twee">You are at the bottom of the western pit in the twopit room.\nThere is a large hole in the wall about 25 feet above you.\n* [[Up|At West End Of Twopit Room]]</div><div tiddler="At West End Of Twopit Room" tags="" modified="201403172120" created="201403172120" twine-position="980,521" modifier="twee">You are at the west end of the twopit room.\nThere is a large hole in the wall above the pit at this end of the room.\n* [[West|In Slab Room]]\n* [[East|At East End Of Twopit Room]]\n* [[Up|It is too far up for you to reach.]]\n* [[Down|In West Pit]]</div><div tiddler="Crossover" tags="" modified="201403172120" created="201403172120" twine-position="2276,911" modifier="twee">You are at a crossover of a high N/S passage and a low E/W one.\n* [[West|At East End Of Long Hall]]\n* [[East|In West Side Chamber]]\n* [[South|At West End Of Long Hall]]\n* [[North|Dead End 7]]</div><div tiddler="Fill Bottle With Water" tags="" modified="201403172336" created="201403162258" twine-position="324,242" modifier="twee">The bottle is now full of water.\n&lt;&lt;set $bottle_has_oil = false&gt;&gt;\n&lt;&lt;set $bottle_has_water = true&gt;&gt;\n* [[Back|At End Of Road]]</div><div tiddler="At Reservoir" tags="" modified="201403172120" created="201403172120" twine-position="1775,805" modifier="twee">You are at the edge of a large underground reservoir.\nAn opaque cloud of white mist fills the room and rises rapidly upward.\nThe lake is fed by a stream, which tumbles out of a hole in the wall about 10 feet overhead\nand splashes noisily into the water somewhere within the mist.\nThe only passage goes back toward the south.\n* [[Leave|In Mirror Canyon]]\n* [[South|In Mirror Canyon]]</div><div tiddler="In Giant Room" tags="" modified="201403172120" created="201403172120" twine-position="2033,1732" modifier="twee">You are in the giant room.\nThe ceiling here is too high up for your lamp to show it.\nCavernous passages lead east, north, and south.\nOn the west wall is scrawled the inscription, 'Fee fie foe foo' [sic].\n* [[East|At Recent Cave In]]\n* [[South|In Narrow Corridor]]\n* [[North|In Immense N S Passage]]</div><div tiddler="oil in the bottle" tags="" modified="201403172120" created="201403172120" twine-position="3113,476" modifier="twee">It looks like ordinary oil to me.</div><div tiddler="In Immense N S Passage" tags="" modified="201403172120" created="201403172120" twine-position="2050,1453" modifier="twee">You are at one end of an immense north/south passage.\n* [[South|In Giant Room]]</div><div tiddler="Dead End 14" tags="" modified="201403172120" created="201403172120" twine-position="3286,476" modifier="twee">You have reached a dead end. There is a massive vending machine here.\n\nHmmm... There is a message here scrawled in the dust in a flowery script.\n* [[Leave|Different Maze 2]]\n* [[North|Different Maze 2]]</div><div tiddler="Dead End 13" tags="" modified="201403172120" created="201403172120" twine-position="3426,476" modifier="twee">This is the pirate's dead end.\n* [[Leave|Alike Maze 13]]</div><div tiddler="In Mirror Canyon" tags="" modified="201403172120" created="201403172120" twine-position="1512,800" modifier="twee">You are in a north/south canyon about 25 feet across.\nThe floor is covered by white mist seeping in from the north.\nThe walls extend upward for well over 100 feet.\nSuspended from some unseen point far above you,\nan enormous two-sided mirror is hanging parallel to and midway between the canyon walls.\n\nA small window can be seen in either wall, some fifty feet up.\n* [[South|In Secret N S Canyon 0]]\n* [[North|At Reservoir]]</div><div tiddler="DeadendRoom" tags="" modified="201403172120" created="201403172120" twine-position="2841,671" modifier="twee">You have reached a dead end.</div><div tiddler="In Hall Of Mt King" tags="" modified="201403172120" created="201403172120" twine-position="2000,967" modifier="twee">You are in the hall of the mountain king, with passages off in all directions.\n* [[West|In West Side Chamber]]\n* [[East|In Hall Of Mists]]\n* [[South|In South Side Chamber]]\n* [[North|Low N S Passage]]\n* [[Up|In Hall Of Mists]]</div><div tiddler="West Side Of Fissure" tags="" modified="201403172120" created="201403172120" twine-position="3015,1202" modifier="twee">You are on the west side of the fissure in the hall of mists.\n* [[West|At West End Of Hall Of Mists]]\n* [[East|The fissure is too wide.]]\n* [[North|At West End Of Hall Of Mists]]</div><div tiddler="At Fork In Path" tags="" modified="201403172120" created="201403172120" twine-position="1141,2400" modifier="twee">The path forks here. The left fork leads northeast.\nA dull rumbling seems to get louder in that direction.\nThe right fork leads southeast down a gentle slope.\nThe main corridor enters from the west.\n* [[West|In Corridor]]\n* [[Down|In Limestone Passage]]</div><div tiddler="In Sloping Corridor" tags="" modified="201403172120" created="201403172120" twine-position="2377,1651" modifier="twee">You are in a long winding corridor sloping out of sight in both directions.\n* [[Up|On Sw Side Of Chasm]]\n* [[Down|In Large Low Room]]</div><div tiddler="At Witts End" tags="" modified="201403172120" created="201403172120" twine-position="1035,828" modifier="twee">You are at Witt's End. Passages lead off in *all* directions.\n* [[West|You have crawled around in some little holes\nand found your way blocked by a recent cave-in.\nYou are now back in the main passage.]]</div><div tiddler="In Limestone Passage" tags="" modified="201403172120" created="201403172120" twine-position="1448,2397" modifier="twee">You are walking along a gently sloping north/south passage\nlined with oddly shaped limestone formations.\n* [[South|In Front Of Barren Room]]\n* [[North|At Fork In Path]]\n* [[Up|At Fork In Path]]\n* [[Down|In Front Of Barren Room]]</div><div tiddler="Outside Grate" tags="" modified="201403172342" created="201403172120" twine-position="900,307" modifier="twee">You are in a 20-foot depression floored with bare dirt.\nSet into the dirt is a strong steel grate mounted in concrete.\nA dry streambed leads into the depression.\n* [[Back to forest|In Forest 1]]\n* [[North|At Slit In Streambed]]</div><div tiddler="In Narrow Corridor" tags="" modified="201403172120" created="201403172120" twine-position="2010,1958" modifier="twee">You are in a long, narrow corridor stretching out of sight to the west.\nAt the eastern end is a hole through which you can see a profusion of leaves.\n* [[West|In Giant Room]]\n* [[East|In West Pit]]\n* [[Down|In West Pit]]</div><div tiddler="In Debris Room" tags="" modified="201403172120" created="201403172120" twine-position="1722,107" modifier="twee">You are in a debris room filled with stuff washed in from the surface.\nA low wide passage with cobbles becomes plugged with mud and debris here,\nbut an awkward canyon leads upward and west.\n\nA note on the wall says, 'Magic word XYZZY.'\n* [[West|In Awkward Sloping E W Canyon]]\n* [[East|In Cobble Crawl]]\n* [[Up|In Awkward Sloping E W Canyon]]</div><div tiddler="In Oriental Room" tags="" modified="201403172120" created="201403172120" twine-position="2988,1667" modifier="twee">This is the oriental room.\nAncient oriental cave drawings cover the walls.\nA gently sloping passage leads upward to the north, another passage leads se,\nand a hands and knees crawl leads west.\n* [[West|In Large Low Room]]\n* [[North|In Misty Cavern]]\n* [[Up|In Misty Cavern]]</div><div tiddler="Below The Grate" tags="" modified="201403172120" created="201403172120" twine-position="1505,266" modifier="twee">You are in a small chamber beneath a 3x3 steel grate to the surface.\nA low crawl over cobbles leads inward to the west.\n* [[West|In Cobble Crawl]]\n* [[Up|Grate]]</div><div tiddler="axe" tags="" modified="201403172120" created="201403172120" twine-position="2647,551" modifier="twee">It's just a little axe.</div><div tiddler="In Pit" tags="" modified="201403172120" created="201403172120" twine-position="15,1013" modifier="twee">You are in the bottom of a small pit with a little stream,\nwhich enters and exits through tiny slits.\n* [[Up|On Brink Of Pit]]\n* [[Down|You don't fit through the tiny slits!]]</div><div tiddler="Inside Building" tags="" modified="201403172331" created="201403172120" twine-position="86,202" modifier="twee">You are inside a building, a well house for a large spring.\n\n&lt;&lt;pause&gt;&gt;\n\t\n&lt;&lt;if !$set_of_keys&gt;&gt;\n\tThere are some keys on the ground here. \nYou take them with you.\n\t&lt;&lt;set $set_of_keys = true&gt;&gt;\n\t&lt;&lt;pause&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if !$tasty_food&gt;&gt;\n\tThere is tasty food here.\nYou take it with you.\n\t&lt;&lt;set $tasty_food = true&gt;&gt;\n\t&lt;&lt;pause&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if !$brass_lantern&gt;&gt;\n\tThere is a shiny brass lamp nearby.\nYou take it with you.\n\t&lt;&lt;set $brass_lantern = true&gt;&gt;\n\t&lt;&lt;pause&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if !$bottle&gt;&gt;\n\tThere is an empty bottle here.\nYou take it with you.\n\t&lt;&lt;set $bottle = true&gt;&gt;\n\t&lt;&lt;pause&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n* [[Leave building|At End Of Road]]</div><div tiddler="Dead End Crawl" tags="" modified="201403172120" created="201403172120" twine-position="2698,1928" modifier="twee">This is a dead end crawl.\n* [[Leave|In Large Low Room]]\n* [[South|In Large Low Room]]</div></div></body></html>
